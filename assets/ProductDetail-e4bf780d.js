import{_ as u,a as r,h as a,r as h,o as l,c,d as s,t as o,b as _,i as m,v as g,g as f,f as y,F as v}from"./index-4b7bad84.js";const b={props:["id"],data(){return{isLoading:!1,isAddLoading:!1,product:{},qty:1}},methods:{handleAdd(){this.isAddLoading=!0,r.post(a.epAddToCart,{data:{product_id:this.product.id,qty:this.qty}}).then(e=>{console.log(e.data.data),alert("加入購物車成功"),this.$router.replace("/products")}).catch(e=>{alert(`失敗:${e.response.data.message||"error"}`)}).finally(()=>{this.isAddLoading=!1})}},mounted(){this.isLoading=!0,r.get(a.epAProductById(this.id)).then(e=>{this.product=e.data.product}).catch(e=>{alert(`失敗:${e.response.data.message||"error"}`),this.$router.back()}).finally(()=>{this.isLoading=!1})}},A={class:"row"},L={class:"col-sm-6"},x=["src"],k={class:"col-sm-6"},q={class:"badge bg-primary rounded-pill"},V={class:"h6"},B={class:"h5"},C={class:"input-group"},N=["disabled"],D={key:0,class:"fas fa-spinner fa-pulse"};function T(e,d,w,F,t,n){const p=h("my-loading");return l(),c(v,null,[s("h1",null,o(t.product.title),1),_(p,{active:t.isLoading},null,8,["active"]),s("div",A,[s("div",L,[s("img",{class:"img-fluid",src:t.product.imageUrl,alt:""},null,8,x)]),s("div",k,[s("span",q,o(),1),s("p",null,"商品描述："+o(t.product.description),1),s("p",null,"商品內容："+o(t.product.content),1),s("del",V,"原價 "+o(t.product.origin_price)+" 元",1),s("div",B,"現在只要 "+o(t.product.price)+" 元",1),s("div",null,[s("div",C,[m(s("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":d[0]||(d[0]=i=>t.qty=i)},null,512),[[g,t.qty]]),s("button",{type:"button",class:"btn btn-primary",onClick:d[1]||(d[1]=(...i)=>n.handleAdd&&n.handleAdd(...i)),disabled:t.isAddLoading},[t.isAddLoading?(l(),c("i",D)):f("",!0),y(" 加入購物車 ")],8,N)])])])])],64)}const U=u(b,[["render",T]]);export{U as default};
