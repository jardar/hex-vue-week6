import{_ as b,a as r,h as c,r as u,o,c as a,b as _,d as t,F as h,e as f,t as d,w as k,f as g,g as x}from"./index-1d1635aa.js";const A={data(){return{products:[],isLoading:!1,isAddLoading:""}},methods:{handleAddToCart(s,l=1){this.isAddLoading=s,r.post(c.epAddToCart,{data:{product_id:s,qty:l}}).then(i=>{console.log(i.data.data),alert("加入購物車成功")}).catch(i=>{alert(`失敗:${i.response.data.message||"error"}`)}).finally(()=>{this.isAddLoading=""})}},mounted(){this.isLoading=!0,r.get(`${c.epAllProducts}`).then(s=>{this.products=s.data.products}).catch(s=>{alert(`失敗:${s.response.data.message||"error"}`)}).finally(()=>{this.isLoading=!1})}},L={class:"table align-middle"},C=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),v={style:{width:"200px"}},N=["src"],T={class:"h6"},V={class:"h5"},w={class:"btn-group btn-group-sm"},B=["onClick","disabled"],F={key:0,class:"fas fa-spinner fa-pulse"},P={key:1},$=t("td",{colspan:"4"},[t("p",{style:{"text-align":"center",padding:"30px"}},"產品列表為空")],-1),q=[$];function z(s,l,i,D,n,p){const m=u("my-loading"),y=u("router-link");return o(),a(h,null,[_(m,{active:n.isLoading},null,8,["active"]),t("table",L,[C,t("tbody",null,[Array.isArray(n.products)&&n.products.length>0?(o(!0),a(h,{key:0},f(n.products,e=>(o(),a("tr",{key:e.id},[t("td",v,[t("img",{src:e.imageUrl,alt:"prod.title",style:{height:"100px","background-size":"cover","background-position":"center"}},null,8,N)]),t("td",null,d(e.title),1),t("td",null,[t("del",T,"原價 "+d(e.origin_price)+" 元",1),t("div",V,"現在只要 "+d(e.price)+" 元",1)]),t("td",null,[t("div",w,[_(y,{to:`/product/${e.id}`,class:"btn btn-outline-secondary"},{default:k(()=>[g("查看更多")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger",onClick:E=>p.handleAddToCart(e.id),disabled:n.isAddLoading===e.id},[n.isAddLoading===e.id?(o(),a("i",F)):x("",!0),g(" 加到購物車 ")],8,B)])])]))),128)):(o(),a("tr",P,q))])])],64)}const U=b(A,[["render",z]]);export{U as default};
