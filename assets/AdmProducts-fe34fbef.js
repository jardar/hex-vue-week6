import{_ as C,o,c as l,d as e,n as g,j as h,F as _,e as k,t as c,a as u,h as m,r as y,b as f}from"./index-1d1635aa.js";const P={props:["page"],emits:["change"],data(){return{}},methods:{handleChange(a){this.$emit("change",a)}}},b={"aria-label":"Page navigation"},x={class:"pagination"},A=["onClick"];function w(a,t,n,v,r,d){return o(),l("nav",b,[e("ul",x,[e("li",{class:g([{disabled:!n.page.has_pre},"page-item"])},[e("a",{onClick:t[0]||(t[0]=h(i=>d.handleChange(n.page.current_page-1),["prevent"])),class:"page-link",href:"#"},"上頁")],2),(o(!0),l(_,null,k(n.page.total_pages,i=>(o(),l("li",{key:i,class:g([{active:n.page.current_page===i},"page-item"])},[e("a",{onClick:h(p=>d.handleChange(i),["prevent"]),class:"page-link",href:"#"},c(i),9,A)],2))),128)),e("li",{class:g([{disabled:!n.page.has_next},"page-item"])},[e("a",{onClick:t[1]||(t[1]=h(i=>d.handleChange(n.page.current_page+1),["prevent"])),class:"page-link",href:"#"},"下頁")],2)])])}const B=C(P,[["render",w]]),$={components:{PageComp:B},data(){return{items:[],page:{},isLoading:!1}},methods:{handlePageChange(a){this.page.current_page!==a&&this.doGetAdminProductsByPage(a)},doGetAdminAllProducts(){u.get(`${m.epAdmAllProducts}`).then(a=>{const t=a.data.products;this.items=t?Object.values(t):[]}).catch(a=>{alert(a.response.data.message||"error")})},doGetAdminProductsByPage(a=1){this.isLoading=!0,u.get(`${m.epAdmGetProductsByCatPage}?page=${a}`).then(t=>{this.page=t.data.pagination;const n=t.data.products;this.items=n?Object.values(n):[]}).catch(t=>{alert(`產品列表：${t.response.data.message||"error"}`),this.$router.replace("/login")}).finally(()=>{this.isLoading=!1})}},mounted(){this.doGetAdminProductsByPage()}},G={class:"container"},L={class:"table mt-4"},j=e("thead",null,[e("tr",null,[e("th",{width:"120"},"分類"),e("th",null,"產品名稱"),e("th",null,"評價"),e("th",{width:"72"},"產品圖"),e("th",{width:"120"},"原價"),e("th",{width:"120"},"售價"),e("th",{width:"100"},"是否啟用")])],-1),F=["src"],N={class:"text-end"},O={class:"text-end"},V={key:0,class:"text-success"},z={key:1},D={key:1},E=e("td",{colspan:"7"},[e("p",{style:{"text-align":"center",padding:"30px"}},"產品列表為空")],-1),M=[E];function S(a,t,n,v,r,d){const i=y("my-loading"),p=y("page-comp");return o(),l(_,null,[f(i,{active:r.isLoading},null,8,["active"]),e("div",G,[e("table",L,[j,e("tbody",null,[Array.isArray(r.items)&&r.items.length>0?(o(!0),l(_,{key:0},k(r.items,s=>(o(),l("tr",{key:s.id},[e("td",null,c(s.category),1),e("td",null,c(s.title),1),e("td",null,c(s.rate?s.rate==3?"✭✭✭":s.rate==2?"✭✭":s.rate="✭":""),1),e("td",null,[e("img",{src:s.imageUrl,alt:"product",width:"48",class:"img-thumbnail"},null,8,F)]),e("td",N,c(s.origin_price),1),e("td",O,c(s.price),1),e("td",null,[s.is_enabled?(o(),l("span",V,"啟用")):(o(),l("span",z,"未啟用"))])]))),128)):(o(),l("tr",D,M))])]),f(p,{page:r.page,onChange:d.handlePageChange},null,8,["page","onChange"])])],64)}const q=C($,[["render",S]]);export{q as default};
